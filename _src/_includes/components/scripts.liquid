<script>
    if(window.attachEvent) {
        window.attachEvent('onload', runAll);
    } else {
        window.addEventListener("load", runAll);
    }

    function runAll(){
        setTimeout(function(){
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').then(function (registration) {
                    console.log("[ServiceWorker] Registered");
                });
            }
            setTimeout(function(){
                /**
                 * non critical javascript - loaded after ~ 1.5+ seconds later (for faster loading)
                 * for example: cookie consent banner
                 */
                {% jsInclude "_static/public/assets/js/app.js" %}
            }, 1000);
        }, 500);
    }
</script>
